# Decompositions
**ç¤¾ä¼šç§‘å­¦ç ”ç©¶ä¸­çš„åˆ†è§£åˆ†ææ–¹æ³•ï¼ˆDecomposition Methods in Social Sciencesï¼‰**
---

## ğŸ§­ å‰è¨€ï¼šä¸ºä»€ä¹ˆç¤¾ä¼šç§‘å­¦ç ”ç©¶éœ€è¦â€œåˆ†è§£â€ï¼Ÿ

åœ¨ç¤¾ä¼šå­¦ä¸äººå£å­¦ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´è¿™æ ·çš„ç ”ç©¶é—®é¢˜ï¼š

> * ä¸ºä»€ä¹ˆä¸åŒå›½å®¶ï¼ˆæˆ–ä¸åŒæ—¶æœŸï¼‰çš„ç”Ÿè‚²ç‡ä¸åŒï¼Ÿ
> * ä¸ºä»€ä¹ˆç”·æ€§çš„å¹³å‡å·¥èµ„é«˜äºå¥³æ€§ï¼Ÿ
> * ä¸ºä»€ä¹ˆæ”¶å…¥ä¸å¹³ç­‰åœ¨ä¸Šå‡ï¼Ÿå“ªäº›å› ç´ è´¡çŒ®æœ€å¤§ï¼Ÿ
> * ä¸ºä»€ä¹ˆæ¨¡å‹é¢„æµ‹æ˜¾ç¤ºæŸç‰¹å¾æ›´é‡è¦ï¼Ÿæˆ‘ä»¬èƒ½è§£é‡Šå®ƒçš„â€œè´¡çŒ®â€å—ï¼Ÿ

è¿™äº›é—®é¢˜çš„å…±åŒæ ¸å¿ƒï¼Œæ˜¯**â€œå·®å¼‚çš„å½’å› â€**ï¼šå½“ä¸¤ä¸ªç¾¤ä½“ã€ä¸¤æ®µæ—¶é—´æˆ–ä¸¤ä¸ªæ¨¡å‹ç»“æœå­˜åœ¨å·®å¼‚æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ€»å·®å¼‚**åˆ†è§£**ä¸ºå„ä¸ªå› ç´ çš„è´¡çŒ®ã€‚

æœ¬ä»“åº“ç³»ç»Ÿä»‹ç»æˆ‘ä¸ªäººä½¿ç”¨å’Œäº†è§£è¿‡çš„ç¤¾ä¼šç§‘å­¦ä¸­å‡ ç±»é‡è¦çš„åˆ†è§£æ–¹æ³•ï¼Œåˆ†åˆ«ä»£è¡¨**äººå£å­¦ â†’ åŠ³åŠ¨ç»æµå­¦ â†’ æœºå™¨å­¦ä¹ **ã€‚å…¶ä¸­äººå£å­¦ä¸­çš„åˆ†è§£æ–¹æ³•æˆ‘åªæ˜¯é˜…è¯»è¿‡ç›¸å…³çš„ç ”ç©¶ï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„ä½¿ç”¨è¿™ç§æ–¹æ³•å†™ä½œè¿‡ç›¸å…³çš„è®ºæ–‡ï¼›æˆ‘çš„åšå£«è®ºæ–‡æ˜¯ç ”ç©¶è€å¹´æ­§è§†å’Œä¸å¹³ç­‰ï¼Œå› æ­¤Oaxaca- Blinderä»¥åŠShapley value decompositionsä½¿ç”¨è¿‡ï¼Œåœ¨è¿™é‡Œä¹Ÿæä¾›æˆ‘çš„ä»£ç ã€‚

---

## ğŸ‘¶ ä¸€ã€äººå£å­¦ä¸­çš„åˆ†è§£æ–¹æ³•ï¼ˆDemographic Decompositionï¼‰

å®é™…ä¸Šåˆ†è§£çš„æ€æƒ³æœ€æ—©æ˜¯ä»äººå£å­¦æå‡ºçš„ï¼Œäººå£å­¦çš„åˆ†è§£æ–¹æ³•æœ€æ—©ç”¨äºè§£é‡Š**äººå£æŒ‡æ ‡å·®å¼‚çš„æ¥æº**ã€‚
æœ€åˆäº†è§£åˆ°åˆ†è§£æ˜¯å¤šå¹´å‰è¯»åˆ°å…³äºç”Ÿè‚²ç‡åˆ†è§£çš„æ–‡çŒ®ï¼Œä»äººå£å­¦çš„è§’åº¦æ¥çœ‹ï¼Œé€šè¿‡å¯¹ç”Ÿè‚²ç‡çš„åˆ†è§£å¯ä»¥å‘ç°ï¼Œä¸»è¦æ˜¯ç”Ÿè‚²æ•°é‡çš„å‡å°‘å’Œç”Ÿè‚²æ—¶é—´çš„æ¨è¿Ÿï¼Œå¯¼è‡´æ—¶æœŸæ€»å’Œç”Ÿè‚²ç‡çš„ä¸‹é™ã€‚

### 2. ç»å…¸æ–¹æ³•

#### ï¼ˆ1ï¼‰**Kitagawa åˆ†è§£ï¼ˆ1955ï¼‰**
Kitagawa æ˜¯æœ€æ—©çš„çº¿æ€§åˆ†è§£æ–¹æ³•ï¼Œç”¨äºæŠŠä¸¤ä¸ªæ€»ä½“ç‡ï¼ˆå¦‚TFRã€æ­»äº¡ç‡ï¼‰å·®å¼‚æ‹†åˆ†ä¸ºâ€œæ„æˆå·®å¼‚â€å’Œâ€œç‡å·®å¼‚â€ä¸¤éƒ¨åˆ†ã€‚

**é€‚ç”¨åœºæ™¯ï¼š**
æ¯”å¦‚ä½ æƒ³æ¯”è¾ƒä¸­å›½å’Œæ—¥æœ¬çš„æ€»å’Œç”Ÿè‚²ç‡ï¼ˆTFRï¼‰å·®å¼‚ã€‚

> ç»“æœå‘ç°ï¼šä¸­å›½çš„TFRæ˜¯1.0ï¼Œæ—¥æœ¬æ˜¯1.3ï¼Œé‚£å·®0.3åˆ°åº•æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ

Kitagawaï¼ˆ1955ï¼‰æå‡ºçš„æ–¹æ³•æŠŠè¿™ä¸ªâ€œæ€»å·®å¼‚â€æ‹†æˆä¸¤éƒ¨åˆ†ï¼š

1. **ç»“æ„æ•ˆåº”ï¼ˆcomposition effectï¼‰**ï¼š
   å¹´é¾„ç»“æ„ä¸åŒé€ æˆçš„ã€‚ä¾‹å¦‚ï¼Œæ—¥æœ¬30â€“34å²å¥³æ€§æ¯”ä¾‹é«˜ï¼Œè€Œè¿™ä¸ªå¹´é¾„æ®µæ˜¯ç”Ÿè‚²é«˜å³°ï¼Œæ‰€ä»¥æ•´ä½“TFRæ›´é«˜ã€‚
2. **ç‡æ•ˆåº”ï¼ˆrate effectï¼‰**ï¼š
   å„å¹´é¾„ç»„çš„ç”Ÿè‚²ç‡ä¸åŒé€ æˆçš„ã€‚ä¾‹å¦‚ï¼Œä¸­å›½æ¯ä¸ªå¹´é¾„æ®µçš„å®é™…ç”Ÿè‚²ç‡æ¯”æ—¥æœ¬ä½ã€‚

å¥¹çš„èªæ˜ä¹‹å¤„åœ¨äºï¼š
ä¸åè¢’ä»»ä½•ä¸€æ–¹ï¼ˆä¸ä»¥ä¸­å›½æˆ–æ—¥æœ¬ä¸ºåŸºå‡†ï¼‰ï¼Œè€Œæ˜¯**å¯¹ä¸¤å›½çš„å¹³å‡æƒ…å†µå–å¯¹ç§°æƒé‡**ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°â€œè°å½“å‚ç…§ç»“æœå°±ä¸åŒâ€çš„é—®é¢˜ã€‚

ğŸ‘‰ æƒ³è±¡ä½ åœ¨ç®—è´¦æ—¶ï¼Œâ€œå¹³å‡ä¸€ä¸‹ä¸¤ç§ç®—æ³•â€ï¼Œä¿è¯ç»“æœå…¬å¹³ã€å¯¹ç§°ã€‚
ğŸ‘‰ Oaxaca & Sierminskaè®¤ä¸ºï¼ŒKitagawa åˆ†è§£åªæ˜¯ Oaxaca-Blinder åˆ†è§£åœ¨ç»“æœå˜é‡ä¸ºäºŒå…ƒå˜é‡ã€æ‰€æœ‰è§£é‡Šå˜é‡å‡ä¸ºäº’æ–¥åˆ†ç±»å˜é‡æ—¶çš„ä¸€ä¸ªç‰¹ä¾‹ï¼ŒäºŒè€…çš„åˆ†è§£æ¡†æ¶å’ŒæŠ€æœ¯ç»†èŠ‚å¹¶ä¸ç›¸é€šã€‚ä½†ä¹Ÿæœ‰å­¦è€…æè®®å°†è¿™ä¸€ç³»åˆ—çš„ç¾¤ä½“å·®å¼‚åˆ†è§£æ–¹æ³•ç»Ÿç§°ä¸ºâ€œK-O-Bâ€åˆ†è§£æ–¹æ³• ã€‚
> - Oaxaca, R. L., & Sierminska, E. (2025). Oaxaca-Blinder meets Kitagawa: What is the link?. PLoS One, 20(5), e0321874.[link](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0321874)

#### ï¼ˆ2ï¼‰**é€æ­¥æ›¿ä»£æ³•ï¼ˆStepwise Replacement, Andreev et al., 2002ï¼‰**
å½“æŒ‡æ ‡æ˜¯éçº¿æ€§çš„ï¼ˆå¦‚é¢„æœŸå¯¿å‘½ã€å¥åº·å¯¿å‘½ã€æ•™è‚²åˆ†å±‚TFRï¼‰ï¼Œç®€å•çº¿æ€§åˆ†è§£å¯èƒ½æ®‹ç•™äº¤äº’é¡¹ã€‚
é€æ­¥æ›¿ä»£æ³•é€šè¿‡ï¼š
1. ä¾æ¬¡æ›¿æ¢æ¯ä¸ªå› ç´ ï¼ˆå¦‚å¹´é¾„ã€åœ°åŒºã€æ•™è‚²ç»„ï¼‰ï¼›
2. è®¡ç®—æ¯æ¬¡æ›¿æ¢å¼•èµ·çš„æŒ‡æ ‡å˜åŒ–ï¼›
3. å¯¹æ‰€æœ‰æ›¿æ¢é¡ºåºæ±‚å¹³å‡ï¼›
   ä»è€Œå®ç°å®Œå…¨å¯¹ç§°çš„å¤šç»´åˆ†è§£ã€‚


**é€‚ç”¨åœºæ™¯ï¼š**
å½“æŒ‡æ ‡æ›´å¤æ‚ï¼Œæ¯”å¦‚â€œé¢„æœŸå¯¿å‘½â€ã€â€œå¥åº·å¯¿å‘½â€è¿™ç§**éçº¿æ€§æŒ‡æ ‡**æ—¶ï¼Œç®€å•ç›¸åŠ å‡å·²ç»ä¸è¡Œã€‚

**ç›´è§‰ç†è§£ï¼š**
å‡è®¾ä½ è¦æ¯”è¾ƒä¸­å›½2010å¹´å’Œ2020å¹´çš„å¹³å‡å¯¿å‘½å·®äº†3å²ï¼Œä½ æƒ³çŸ¥é“ï¼š

* æ˜¯å“ªä¸ªå¹´é¾„æ®µçš„æ­»äº¡ç‡ä¸‹é™è´¡çŒ®æœ€å¤§ï¼Ÿ
* æ˜¯å“ªä¸€ç±»æ­»å› çš„æ”¹å–„æœ€å…³é”®ï¼Ÿ

**åšæ³•æ˜¯è¿™æ ·çš„ï¼š**

1. ä»2010å¹´çš„ç”Ÿå‘½è¡¨å¼€å§‹ã€‚
2. ä¸€æ­¥æ­¥åœ°ï¼ŒæŠŠ2010å¹´çš„å‚æ•°ï¼ˆæ­»äº¡ç‡ï¼‰ä¸€ä¸ªå¹´é¾„æ®µä¸€ä¸ªå¹´é¾„æ®µåœ°æ›¿æ¢æˆ2020å¹´çš„æ•°å€¼ï¼›
3. æ¯æ›¿æ¢ä¸€æ¬¡ï¼Œå°±çœ‹æ€»å¯¿å‘½å˜åŒ–äº†å¤šå°‘ï¼›
4. æœ€åæŠŠæ¯ä¸ªå¹´é¾„æ®µâ€œå¸¦æ¥çš„æå‡â€åŠ æ€»èµ·æ¥ã€‚

å¦‚æœä½ æ¢çš„é¡ºåºä¸åŒï¼Œç»“æœä¼šæœ‰ç‚¹å·®å¼‚ï¼Œæ‰€ä»¥Andreevç­‰äººï¼ˆ2002ï¼‰æå‡ºâ€”â€”
ğŸ‘‰ **å¯¹æ‰€æœ‰å¯èƒ½çš„æ›¿æ¢é¡ºåºæ±‚å¹³å‡**ï¼Œå¾—åˆ°â€œå…¬æ­£â€çš„åˆ†è§£ç»“æœã€‚

è¿™å…¶å®å°±æ˜¯æŠŠKitagawaçš„â€œä¸¤æ­¥å¹³å‡â€æ¨å¹¿æˆâ€œå¤šæ­¥å¹³å‡â€ï¼Œ
æ¢å¥è¯è¯´ï¼Œæ˜¯ä¸€ä¸ªå¤šç»´ç‰ˆæœ¬çš„â€œShapley åˆ†è§£â€ã€‚

 > - Andreev, E. M., Shkolnikov, V. M., & Begun, A. Z. (2002). Algorithm for decomposition of differences between aggregate demographic measures and its application to life expectancies, healthy life expectancies, parity-progression ratios and total fertility rates. Demographic research, 7, 499-522.[Link](https://www.jstor.org/stable/26348070?seq=1)
 > - 

#### ï¼ˆ3ï¼‰**è¿ç»­å˜åŒ–æ³•ï¼ˆHoriuchi et al., 2008ï¼‰**
å°†å·®å¼‚çœ‹ä½œå‚æ•°ä»ç¾¤ä½“Bè¿ç»­å˜ä¸ºAçš„è¿‡ç¨‹ã€‚
é€šè¿‡ç§¯åˆ†å½¢å¼è®¡ç®—å„å› ç´ çš„è¾¹é™…è´¡çŒ®ï¼Œå®ç°**æ— æ®‹å·®ã€é¡ºåºæ— å…³**çš„åˆ†è§£ã€‚
è¿™ä¸€æ–¹æ³•åœ¨ç†è®ºä¸Šç­‰ä»·äº**Aumannâ€“Shapley è¿ç»­åˆ†è§£**ã€‚

**é€‚ç”¨åœºæ™¯ï¼š**
å½“ä½ çš„æŒ‡æ ‡æ›´å¤æ‚ã€ç»´åº¦æ›´å¤šæ—¶ï¼ˆä¾‹å¦‚åˆ†åœ°åŒºã€åˆ†æ•™è‚²ã€åˆ†å©šå§»çŠ¶æ€çš„ç”Ÿè‚²ç‡ï¼‰ï¼Œä½ ä¼šå¸Œæœ›ä¸å†ä¸€ä¸ªä¸ªæ›¿ï¼Œè€Œæ˜¯â€œè¿ç»­åœ°â€å˜åŒ–ã€‚

**ç›´è§‰ç†è§£ï¼š**
æƒ³è±¡ä½ æŠŠ2010å¹´çš„ç”Ÿå‘½è¡¨ä¸€ç‚¹ç‚¹â€œæ¨â€æˆ2020å¹´çš„ç”Ÿå‘½è¡¨ï¼Œ
å‚æ•°åƒæµåŠ¨çš„æ°´ä¸€æ ·ä»æ—§çŠ¶æ€å¹³æ»‘æµå‘æ–°çŠ¶æ€ã€‚
è¿™æ—¶å€™ï¼Œä½ å¯ä»¥é€šè¿‡æ•°å­¦ç§¯åˆ†ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå°å˜åŒ–åœ¨æ€»å˜åŒ–ä¸­è´¡çŒ®å¤šå°‘ã€‚

**ç‰¹ç‚¹ï¼š**

* æ— æ®‹å·®ï¼ˆå®Œå…¨å¯åŠ ï¼‰
* ä¸ä¾èµ–æ›¿æ¢é¡ºåºï¼ˆé¡ºåºæ— å…³ï¼‰
* ç†è®ºä¸Šç­‰ä»·äºâ€œè¿ç»­ç‰ˆæœ¬çš„Shapleyåˆ†è§£â€

**ä¸€å¥è¯ç†è§£ï¼š**
å¦‚æœKitagawaæ˜¯â€œå¹³å‡ä¸€ä¸‹å°±å¯¹ç§°â€ï¼ŒAndreevæ˜¯â€œå¤šæ¬¡æ›¿æ¢å–å¹³å‡â€ï¼Œ
é‚£ä¹ˆHoriuchiå°±æ˜¯â€œæ— ç©·å°æ›¿æ¢å–æé™â€â€”â€”
å®ƒæ˜¯æœ€ä¼˜é›…ã€æœ€ç†è®ºåŒ–ã€ä¹Ÿæ˜¯æœ€ç²¾ç¡®çš„åˆ†è§£æ–¹æ³•ã€‚


> - Horiuchi, S., Wilmoth, J. R., & Pletcher, S. D. (2008). A decomposition method based on a model of continuous change. Demography, 45(4), 785-801. [Link](https://link.springer.com/article/10.1353/dem.0.0033)

#### ğŸ§© ä¸‰è€…çš„åŒºåˆ«ä¸è¿›åŒ–å…³ç³»

| æ–¹æ³•                         | æ€è·¯          | ç‰¹ç‚¹         | é€‚ç”¨åœºæ™¯         |
| -------------------------- | ----------- | ---------- | ------------ |
| **Kitagawa (1955)**        | ä¸¤ä¸ªå› ç´ ã€å¹³å‡å¤„ç†   | ç®€å•ç›´è§‚ã€é—­å¼å…¬å¼  | å¹´é¾„ç»“æ„ Ã— ç”Ÿè‚²ç‡å·®å¼‚ |
| **é€æ­¥æ›¿ä»£æ³• (Andreev, 2002)**  | å¤šç»´ã€é€æ­¥æ›¿æ¢ã€æ±‚å¹³å‡ | æ— æ®‹å·®ã€è·¯å¾„å…¬å¹³   | å¯¿å‘½å·®å¼‚ã€æ­»å› åˆ†è§£    |
| **è¿ç»­å˜åŒ–æ³• (Horiuchi, 2008)** | å‚æ•°è¿ç»­å˜æ¢ã€ç§¯åˆ†åˆ†è§£ | ç†è®ºæœ€ä¸¥è°¨ã€é¡ºåºæ— å…³ | é«˜ç»´æŒ‡æ ‡ã€å¤šå› ç´ åˆ†è§£   |

---

ä¸¾ä¸ªç”Ÿæ´»åŒ–çš„ä¾‹å­æ¥ç†è§£,å‡è®¾ä½ æƒ³æ¯”è¾ƒï¼š
> â€œ2010å¹´å’Œ2020å¹´ï¼Œå¥³æ€§çš„åˆè‚²å¹´é¾„ä¸ºä»€ä¹ˆæé«˜äº†3å²ï¼Ÿâ€

| å¯èƒ½çš„åŸå›             | å±äºå“ªç±»æ•ˆåº”           |
| ---------------- | ---------------- |
| å¹´è½»äººä¸Šå¤§å­¦æ¯”ä¾‹é«˜ã€æ™šå©šå¤šäº†   | **ç»“æ„æ•ˆåº”**ï¼ˆç¾¤ä½“æ„æˆå˜äº†ï¼‰ |
| åŒæ ·å¹´é¾„çš„å¥³æ€§ä¹Ÿæ›´å€¾å‘äºæ¨è¿Ÿç”Ÿè‚² | **ç‡æ•ˆåº”**ï¼ˆè¡Œä¸ºæ¨¡å¼å˜äº†ï¼‰  |

ä¸‰ç§æ–¹æ³•åœ¨åšä»€ä¹ˆï¼Ÿ
* **Kitagawaï¼š** å¤§æ¦‚ä¼°ä¸€ä¸‹è¿™ä¸¤ç±»æ•ˆåº”å„å å¤šå°‘ï¼›
* **é€æ­¥æ›¿ä»£ï¼š** ç»†åˆ†åˆ°æ¯ä¸ªå¹´é¾„æˆ–æ•™è‚²ç»„ï¼Œçœ‹å“ªä¸ªç»„å˜åŒ–æœ€å¤šï¼›
* **è¿ç»­å˜åŒ–æ³•ï¼š** ç²¾ç¡®ç®—å‡ºæ¯ä¸ªç»„ã€æ¯ä¸ªç»†å¾®å˜åŒ–çš„è¿ç»­è´¡çŒ®ã€‚

#### ğŸŒ å»¶ä¼¸é˜…è¯»ï¼ˆæ¨èé¡ºåºï¼‰

1. Kitagawa, E. M. (1955). *Components of a Difference Between Two Rates.* JASA.
2. Andreev, E., Shkolnikov, V., & Begun, A. (2002). *An Algorithm for Decomposition of Differences in Aggregate Demographic Measures.* *Demographic Research*, 7(14).
3. Horiuchi, S., Wilmoth, J., & Pletcher, S. (2008). *A Decomposition Method Based on a Model of Continuous Change.* *Demography*, 45(4).
4. Das Gupta, P. (1993). *Standardization and Decomposition of Rates: A Userâ€™s Manual.*
5. Preston, S., Heuveline, P., & Guillot, M. (2001). *Demography: Measuring and Modeling Population Processes.*


---

## âš–ï¸ äºŒã€åŠ³åŠ¨ç»æµå­¦ä¸­çš„åˆ†è§£æ–¹æ³•ï¼ˆInequality & Discrimination Decompositionï¼‰

### 1. Oaxacaâ€“Blinder åˆ†è§£ï¼ˆ1973ï¼‰

Oaxaca å’Œ Blinder å‡ ä¹åŒæ—¶æå‡ºäº†è¿™ä¸€æ–¹æ³•ï¼Œç”¨äºå°†ä¸¤ç¾¤ä½“ï¼ˆå¦‚ç”·æ€§ä¸å¥³æ€§ï¼‰çš„å¹³å‡å·¥èµ„å·®æ‹†è§£ä¸ºä¸¤éƒ¨åˆ†ï¼š

[
\Delta \bar{W} = (\bar{X}_A - \bar{X}_B)\hat{\beta}_B + \bar{X}_B(\hat{\beta}_A - \hat{\beta}_B)
]

* **è§£é‡Šéƒ¨åˆ† (Explained)**ï¼šç‰¹å¾å·®å¼‚ï¼ˆå¦‚æ•™è‚²ã€ç»éªŒã€è¡Œä¸šï¼‰
* **ä¸å¯è§£é‡Šéƒ¨åˆ† (Unexplained)**ï¼šæŠ¥é…¬å·®å¼‚ï¼ˆé€šå¸¸è§£é‡Šä¸ºæ­§è§†ï¼‰

è¿™ä¸€æ–¹æ³•æˆä¸ºç ”ç©¶**æ€§åˆ«å·¥èµ„å·®è·ã€æ•™è‚²å›æŠ¥å·®è·**çš„ç»å…¸å·¥å…·ã€‚

ä½†å®ƒå­˜åœ¨ï¼š
* **åŸºå‡†ä¾èµ–é—®é¢˜**ï¼šç»“æœä¾èµ–äºé€‰æ‹©å“ªç»„ç³»æ•°ä¸ºâ€œéæ­§è§†åŸºå‡†â€ï¼›
* **åªèƒ½è§£é‡Šå‡å€¼å·®**ï¼šæ— æ³•åˆ†è§£ä¸­ä½æ•°æˆ–åˆ†å¸ƒå°¾éƒ¨å·®å¼‚ã€‚

---

### 2. RIFâ€“Oaxacaâ€“Blinder åˆ†è§£ï¼ˆFirpo, Fortin & Lemieux, 2009ï¼‰

ä¸ºå…‹æœä»¥ä¸Šå±€é™ï¼Œå­¦è€…å¼•å…¥äº†**å†ä¸­å¿ƒåŒ–å½±å“å‡½æ•°ï¼ˆRIFï¼‰**ã€‚
RIF æŠŠä»»æ„åˆ†å¸ƒç»Ÿè®¡é‡ï¼ˆå¦‚åˆ†ä½æ•°ã€Gini ç³»æ•°ï¼‰çº¿æ€§åŒ–ï¼Œä½¿å…¶å¯è¢«å›å½’ä¸åˆ†è§£ã€‚

> **æ€æƒ³ï¼š**
> å¯¹ä»»æ„ç»Ÿè®¡é‡ (v(F_Y))ï¼Œè®¡ç®—å…¶ RIFï¼š
> [
> RIF(y; v) = v + IF(y; v)
> ]
> å…¶ä¸­ (IF) æ˜¯å½±å“å‡½æ•°ã€‚å¯¹ RIF è¿›è¡Œçº¿æ€§å›å½’ï¼Œå°±èƒ½åƒå¤„ç†å‡å€¼ä¸€æ ·åšåˆ†è§£ã€‚

å› æ­¤ï¼ŒRIFâ€“OB å¯ä»¥è§£é‡Šï¼š

* ä¸åŒåˆ†ä½æ•°çš„å·¥èµ„å·®è·æ¥æºï¼›
* æ”¶å…¥ä¸å¹³ç­‰çš„å˜åŒ–ï¼ˆç»“æ„ vs æŠ¥é…¬ï¼‰ã€‚

**å»¶ä¼¸é˜…è¯»**

* Oaxaca, R. (1973). *Int. Econ. Rev.* 14(3).
* Blinder, A. (1973). *J. Human Resources.* 8(4).
* Firpo, S., Fortin, N., & Lemieux, T. (2009). *Econometrica*, 77(3).
* Fortin et al. (2011). *Handbook of Labor Economics.*
* ç»æµå­¦é¢†åŸŸè¿˜æœ‰æ›´å¤šçš„åˆ†è§£æ–¹æ³•å’Œæ–¹æ³•çš„ä¼˜åŒ–æ€è·¯ï¼Œè¯¦æƒ…è¯·è§è¿™ä¸ª[ç ”ç©¶ç»¼è¿°](./DECOMPOSITION%20METHODS%20IN%20ECONOMICS.pdf)

---

### 3. æˆ‘çš„åšå£«è®ºæ–‡ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RIF-OBåˆ†è§£çš„
æˆ‘å…³æ³¨åˆ°äº†è€å¹´äººçš„self perception of agingå­˜åœ¨åŸä¹¡å’Œæ€§åˆ«å·®å¼‚ï¼Œäºæ˜¯ä½¿ç”¨RIF-OBåˆ†è§£åˆ†æè¿™ç§å·®å¼‚çš„å½±å“å› ç´ ã€‚RIF-OBåˆ†è§£çš„å¥½å¤„æ˜¯é™¤äº†å‡å€¼å·®å¼‚ä¹‹å¤–è¿˜å¯ä»¥ç ”ç©¶åˆ†å¸ƒå·®å¼‚ï¼Œå› æ­¤æˆ‘çš„ç ”ç©¶ä¸»è¦å…³æ³¨äº†å››ç§å·®å¼‚ï¼šå‡å€¼å·®å¼‚ã€æ–¹å·®å·®å¼‚ã€P90-P10åˆ†ä½æ•°å·®å¼‚ã€åŸºå°¼ç³»æ•°å·®å¼‚ã€‚
æ˜¯æ ¹æ®[Jann2024](The%20OB%20in%20Stata%202024%20byBen%20Jann.pdf)ã€[Andrew2024](./RIF+RIF-OB%202024%20by%20Andrew%20.pdf)çš„æ•™ç¨‹ï¼Œåœ¨STATA18ä¸­å®Œæˆçš„åˆ†æï¼Œ[ä»£ç ](./RIF-OB%20stata%20do-file.do)ã€‚
å¦å¤–æˆ‘è¿˜å¯¹ç»“æœè¿›è¡Œäº†å¯è§†åŒ–ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´ç›´è§‚çš„å¯¹æ¯”å›¾ï¼Œ[ç»˜åˆ¶ä»£ç ](./visualization%20code%20of%20RIF-OB%20STATA%20do-file.do)åœ¨æ­¤åˆ†äº«ã€‚
![å›¾ç‰‡](./Figure3.png)
---

## ğŸ§® ä¸‰ã€Shapley ä¸ SHAPï¼šåˆ†è§£çš„åšå¼ˆè®ºæ ¹æºä¸æœºå™¨å­¦ä¹ æ‹“å±•

### 1. Shapley å€¼ï¼ˆ1953ï¼‰

Shapley åœ¨åšå¼ˆè®ºä¸­æå‡ºäº†ä¸€ç§**å…¬å¹³åˆ†æ‘Šæ³•åˆ™**ï¼š
ç»™å®šä¸€ä¸ªåˆä½œåšå¼ˆï¼ŒShapley å€¼è¡¡é‡æ¯ä¸ªå‚ä¸è€…å¯¹æ€»æ”¶ç›Šçš„å¹³å‡è¾¹é™…è´¡çŒ®ã€‚

åœ¨äººå£å­¦ã€ç»æµå­¦ä¸­ï¼Œ**Shapley åˆ†è§£**æˆä¸ºä¸€ç§ç»Ÿä¸€çš„åˆ†é…æ€æƒ³ï¼š

* å¯¹æ‰€æœ‰å› ç´ æ’åˆ—é¡ºåºæ±‚å¹³å‡ï¼›
* å„å› ç´ è´¡çŒ®ä¹‹å’Œç­‰äºæ€»ä½“å·®å¼‚ï¼›
* ç»“æœä¸ä¾èµ–äºå˜é‡é¡ºåºï¼Œæ— æ®‹å·®ã€‚

äº‹å®ä¸Šï¼š

> Kitagawaã€é€æ­¥æ›¿ä»£æ³•ã€Horiuchi è¿ç»­å˜åŒ–æ³•ï¼Œ
> éƒ½æ˜¯ Shapley åˆ†è§£åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„ç‰¹ä¾‹ã€‚

---

### 2. SHAPï¼ˆSHapley Additive exPlanationsï¼‰

åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œ[Lundberg & Lee (2017)](https://proceedings.neurips.cc/paper/2017/hash/8a20a8621978632d76c43dfd28b67767-Abstract.html) å°† Shapley å€¼æ€æƒ³å¼•å…¥æ¨¡å‹è§£é‡Šï¼š

* æŠŠæ¨¡å‹é¢„æµ‹çœ‹ä½œâ€œåšå¼ˆæ€»æ”¶ç›Šâ€ï¼Œ
* å„ç‰¹å¾æ˜¯â€œå‚ä¸è€…â€ï¼Œ
* è®¡ç®—æ¯ä¸ªç‰¹å¾çš„å¹³å‡è¾¹é™…è´¡çŒ®ã€‚

ç»“æœï¼š
[
f(x) = \phi_0 + \sum_j \phi_j
]

* (\phi_0)ï¼šåŸºå‡†è¾“å‡ºï¼ˆå¹³å‡é¢„æµ‹ï¼‰
* (\phi_j)ï¼šç‰¹å¾ (j) å¯¹é¢„æµ‹çš„ Shapley è´¡çŒ®

å…³äºæƒ³è¦å­¦ä¹ å’Œä½¿ç”¨ï¼Œæˆ‘åœ¨kaggleä¸Šæ‰¾åˆ°ä¸€ä¸ªä¸é”™çš„å­¦ä¹ å’Œç»ƒä¹ çš„æ•™ç¨‹ï¼š[Advanced Uses of SHAP Values](https://www.kaggle.com/code/dansbecker/advanced-uses-of-shap-values)

**å»¶ä¼¸é˜…è¯»**

* Shapley, L. (1953). *A Value for N-Person Games.*
* Lundberg, S. & Lee, S. (2017). *A Unified Approach to Interpreting Model Predictions.* NeurIPS.
* Molnar, C. (2022). *Interpretable Machine Learning.*


### 3. æˆ‘çš„åšå£«è®ºæ–‡ä¸­çš„Shapley value decomposition
ä¸­å›½ç»æµç¤¾ä¼šå‘å±•å­˜åœ¨æ˜¾è‘—çš„åŒºåŸŸå·®å¼‚ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºå››ä¸ªåŒºåŸŸï¼Œåœ¨æˆ‘çš„åšå£«è®ºæ–‡å…³æ³¨åˆ°äº†è¿™ç§åŒºåŸŸå·®å¼‚ï¼Œå¹¶é€šè¿‡shapleyå€¼åˆ†è§£æ¥ç ”ç©¶ä¸åŒåŒºåŸŸå½±å“å› ç´ çš„è´¡çŒ®å€¼ã€‚è¿™ä¸ªéƒ¨åˆ†æœ¬æ¥æ˜¯æƒ³ä½¿ç”¨STATAè¿›è¡Œåˆ†æçš„ï¼Œä½†æ˜¯STATAä¸­èƒ½åˆ†è§£çš„å› ç´ æœ‰æ•°é‡é™åˆ¶ï¼Œå› æ­¤ä½¿ç”¨äº†pythonä¸­çš„SHAPåŒ…ï¼Œ[ä»£ç ](./shapley-region.ipynb)
![å›¾ç‰‡](./Figure2.png)


---

## ğŸ“š æ¨èé˜…è¯»ä¸å·¥å…·

* Das Gupta, P. (1993). *Standardization and Decomposition of Rates: A Userâ€™s Manual.*
* Preston, S. et al. (2001). *Demography: Measuring and Modeling Population Processes.*
* Fortin, Lemieux, & Firpo (2011). *Decomposition Methods in Economics.*
* Shorrocks, A. (2013). *Decomposition Procedures for Distributional Analysis.*
* Molnar, C. (2022). *Interpretable Machine Learning.*

---